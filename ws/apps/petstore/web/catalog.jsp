<script type="text/javascript" src="dojo.js"></script><script type="text/javascript" src="scroller.js"></script><link rel="stylesheet" type="text/css" href="scroller.css"></link><script type="text/javascript" src="accordion.js"></script><script type="text/javascript" src="engine.js"></script><link rel="stylesheet" type="text/css" href="accordion.css"></link><script type="text/javascript">window.onload=init;var ac;var is;var listener;function init() {    var engine = new Engine();    is = new ImageScroller();    is.load();    listener = new CatalogListener();    if (document.getElementById("infopaneRating")) {        engine.inject({url:"/petstore/faces/rating.jsp",                        injectionPoint: document.getElementById("infopaneRating"),                        initFunction: function() {                            dojo.event.connect("before", bpui.rating, "doClick", listener, "modifyState");                            listener.initialize();                        } });    }        ac = new AccordionMenu();    ac.load();}function CatalogListener() {  dojo.event.topic.subscribe("/scroller", this, handleEvent);    var initalRating;  var initalItem;    function handleEvent(args) {      if (args.type == "showingItem") {        // update the id on the ratring component        if (typeof bpui != 'undefined') {        //alert("changing the rating on item " + args.id + " to " + args.rating);            if (typeof bpui.rating != 'undefined') {                bpui.rating.state["rating"].bindings["itemId"]=args.id;                bpui.rating.modifyDisplay("rating", args.rating, true);            }        } else {            // things haven't been loaded to set the inital rating            initalItem = args.id;            initalRating = args.rating;        }      }  }    this.initialize = function() {      var ratingInstance = bpui.rating.state["rating"];      ratingInstance.grade = initalRating;      bpui.rating.state["rating"].bindings["itemId"]=initalItem;      bpui.rating.modifyDisplay("rating", initalRating, true);  }    this.modifyState = function(arg, rating) {      var itemId = initalItem;      if (typeof  bpui.rating.state["rating"].bindings["itemId"] != 'undefined') {          itemId = bpui.rating.state["rating"].bindings["itemId"];       }      //alert(itemId + " object is=" + is.attributes(itemId).rating + " rating="  + is.attributes(itemId).rating);      // set the cached rating to the new rating that was set.      is.attributes(itemId).rating = rating;      //alert("modify state " + rating);  }}</script><body><jsp:include page="banner.jsp" /><center><table border="0"> <tr>  <td>   <table id="accordion">     <tr id="accordionTitle" class="accordionTitle"><td>Pets</td></tr>     <tr><td>     <table id="accordionBody" border="0" class="accordionBody">     </table>     </td></tr>   </table>  </td> <td> <table border="0" class="slider" >  <tr height="420" valign="top">   <td id="bodySpace" border="0" align="center"></td>  </tr>  <tr id="targetRow">   <td width="500" height="70 align="top">     <div class="nav" id="right_button">       <img src="images/right.gif" name="nextRoll"  border="0">     </div>     <div class="nav" id="left_button">        <img src="images/left.gif" name="previousRoll"  border="0">    </div>                     </td>                      </tr> </table></td></tr></table><div id="status"></div> <div id="status_2"></div><div id="dstatus"></div><div id="injection_point"></div></center></body>